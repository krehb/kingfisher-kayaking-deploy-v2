{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import'./calendar.css';import buildCalendar from'./build';import renderKayaks from'./renderKayaks';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{Container,Row,Col}from'react-bootstrap';import Weather from'../weather/weather';export default function Calendar(_ref){var value=_ref.value,onChange=_ref.onChange,back=_ref.back,booked=_ref.booked,kayaksInStock=_ref.kayaksInStock,routeSelected=_ref.routeSelected,setViewing=_ref.setViewing;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),calendar=_useState2[0],setCalendar=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),kayaksLeft=_useState4[0],setKayaksLeft=_useState4[1];var _useState5=useState('no guide'),_useState6=_slicedToArray(_useState5,2),guidedRoute=_useState6[0],setGuideRoute=_useState6[1];//react routing \nvar history=useHistory();useEffect(function(){setCalendar(buildCalendar(value));setKayaksLeft(renderKayaks(value,kayaksInStock,booked));// rendering 'Guide on: {guideRoute}'\nsetGuideRoute('no guide');booked.forEach(function(bookingData){if(bookingData.name==='guide1706'&&value.isSame(bookingData.date,'day')){setGuideRoute(bookingData.route);}});},[value]);function currMonthName(){return value.format('MMMM');}function currYear(){return value.format('YYYY');}function prevMonth(){return value.clone().subtract(1,'month');}function nextMonth(){return value.clone().add(1,'month');}function thisMonth(){return value.isSame(new Date(),'month');}//styling\nfunction isSelected(day,value){return value.isSame(day,'day');}function beforeToday(day){return day.isBefore(new Date(),'day');}function isToday(day){return day.isSame(new Date(),'day');}//styling num of kayaks\n// 0 left\nfunction isBooked0(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal===kayaksInStock||kayaksBookedTotal+1===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 2 + left\nfunction isBooked2(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+2===kayaksInStock||kayaksBookedTotal+3===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 4 + left\nfunction isBooked4(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+4===kayaksInStock||kayaksBookedTotal+5===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}// 6 + left\nfunction isBooked6(day){var kayakCount=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var classes=null;booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){var kayaksBookedTotal=kayakCount.reduce(reducer);if(kayaksBookedTotal+6===kayaksInStock||kayaksBookedTotal+7===kayaksInStock){classes=bookedData.date;}}}});return day.isSame(classes,'day');}function isGuided(day){var classes=null;var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var kayakCount=[];booked.forEach(function(bookedData){if(day.isSame(bookedData.date,'day')){var parsedKayaks=JSON.parse(bookedData.numOfKayaks);kayakCount.push(parsedKayaks);if(kayakCount.length>0){if(bookedData.name==='guide1706'){classes=bookedData.date;}}}});return day.isSame(classes,'day');}function dayStyles(day,value){if(beforeToday(day))return'before';if(isSelected(day,value))return'red';if(isToday(day))return'today';if(isBooked0(day))return'kayaks-0';if(isBooked2(day))return'kayaks-2';if(isBooked4(day))return'kayaks-4';if(isBooked6(day))return'kayaks-6';return'';}function guideStyle(day,value){if(isGuided(day))return'guide-yes';return'guide-no';}function guideStyleForDay(day,value){if(isGuided(day))return'guide-no';return'guide-yes';}// const guideRouteHandler = (booked, value) => {\n//     let select = 'no guide'\n//     booked.forEach(bookingData => {\n//         if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\n//             select = bookingData.route\n//         }\n//     });\n//     return select\n// }\nvar backToHomeHandler=function backToHomeHandler(){history.push('/');};return/*#__PURE__*/React.createElement(\"div\",{className:\"full-calendar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"top-half-calendar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"selection-footer \"},/*#__PURE__*/React.createElement(\"div\",{className:\"info-text-header\"},/*#__PURE__*/React.createElement(\"h\",null,\"Pick A Day\")),/*#__PURE__*/React.createElement(\"div\",{className:\"parent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"info-text-header-underline\"},\"o\")),/*#__PURE__*/React.createElement(\"div\",{className:\"info-text-header-2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h\",null,/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"map-marker-alt\",size:\"1x\"}),\" \",routeSelected)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h\",null,/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"calendar-alt\",size:\"1x\"}),\" Date: \",value.format(\"MM/DD\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"info-text\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"cal-b-text\"},\"Avalible: \",kayaksLeft,\" kayaks\"),/*#__PURE__*/React.createElement(\"h6\",{className:\"cal-b-text\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"compass\",size:\"1x\"}),\" Guide: \",guidedRoute)),/*#__PURE__*/React.createElement(\"div\",{className:\"direction-buttons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:backToHomeHandler},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-left\",size:\"1x\"}),\" Back\"),/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:function onClick(){return setViewing(false);}},\"Continue \",/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-right\",size:\"1x\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"calendar\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"previous\",onClick:function onClick(){return!thisMonth()&&onChange(prevMonth());}},!thisMonth()?/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-left\",size:\"1x\"}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"current\"},currMonthName(),\" \",currYear()),/*#__PURE__*/React.createElement(\"div\",{className:\"next\",onClick:function onClick(){onChange(nextMonth());}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-right\",size:\"1x\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"day-names\"},[\"s\",\"m\",\"t\",\"w\",\"t\",\"f\",\"s\"].map(function(d){return/*#__PURE__*/React.createElement(\"div\",{className:\"week\"},d);})),calendar.map(function(week){return/*#__PURE__*/React.createElement(\"div\",null,week.map(function(day){return/*#__PURE__*/React.createElement(\"div\",{className:\"day\",id:day.format(\"D\"),key:day,onClick:function onClick(){!beforeToday(day)&&onChange(day);// console.log('clicked', day)\n}},/*#__PURE__*/React.createElement(\"div\",{className:dayStyles(day,value)},/*#__PURE__*/React.createElement(\"span\",{className:guideStyleForDay(day,value)},day.format('D').toString()),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"compass\",className:guideStyle(day,value),size:\"2x\"})));}));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"bottom-half-calendar\"},/*#__PURE__*/React.createElement(Weather,{value:value})));}","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/calendar/index.jsx"],"names":["React","useState","useEffect","useHistory","buildCalendar","renderKayaks","FontAwesomeIcon","Container","Row","Col","Weather","Calendar","value","onChange","back","booked","kayaksInStock","routeSelected","setViewing","calendar","setCalendar","kayaksLeft","setKayaksLeft","guidedRoute","setGuideRoute","history","forEach","bookingData","name","isSame","date","route","currMonthName","format","currYear","prevMonth","clone","subtract","nextMonth","add","thisMonth","Date","isSelected","day","beforeToday","isBefore","isToday","isBooked0","kayakCount","reducer","accumulator","currentValue","classes","bookedData","parsedKayaks","JSON","parse","numOfKayaks","push","length","kayaksBookedTotal","reduce","isBooked2","isBooked4","isBooked6","isGuided","dayStyles","guideStyle","guideStyleForDay","backToHomeHandler","map","d","week","toString"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport './calendar.css';\r\nimport buildCalendar from './build';\r\nimport renderKayaks from './renderKayaks';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport Weather from '../weather/weather';\r\n\r\nexport default function Calendar({value, onChange, back, booked, kayaksInStock , routeSelected, setViewing}) {\r\n    const [calendar , setCalendar] = useState([]);\r\n    const [kayaksLeft, setKayaksLeft] = useState();\r\n    const [guidedRoute, setGuideRoute] = useState('no guide');\r\n\r\n    //react routing \r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        setCalendar(buildCalendar(value));\r\n        setKayaksLeft(renderKayaks(value, kayaksInStock, booked));\r\n\r\n        // rendering 'Guide on: {guideRoute}'\r\n        setGuideRoute('no guide')\r\n        booked.forEach(bookingData => {\r\n            if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\r\n                setGuideRoute(bookingData.route)\r\n            }\r\n        });\r\n\r\n    }, [value])\r\n\r\n    function currMonthName() {\r\n        return value.format('MMMM')\r\n    }\r\n\r\n    function currYear() {\r\n        return value.format('YYYY')\r\n    }\r\n\r\n    function prevMonth() {\r\n        return value.clone().subtract(1, 'month')\r\n    }\r\n\r\n    function nextMonth() {\r\n        return value.clone().add(1, 'month')\r\n    }\r\n\r\n    function thisMonth() {\r\n        return value.isSame(new Date(), 'month')\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //styling\r\n    function isSelected(day, value) {\r\n        return value.isSame(day, 'day');\r\n    }\r\n    function beforeToday(day) {\r\n        return day.isBefore(new Date(), 'day');\r\n    }\r\n    function isToday(day) {\r\n        return day.isSame(new Date(), 'day');\r\n    }\r\n\r\n\r\n     \r\n\r\n        //styling num of kayaks\r\n        // 0 left\r\n    function isBooked0(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null  \r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day') ) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if((kayaksBookedTotal === kayaksInStock) || ((kayaksBookedTotal + 1) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n\r\n        // 2 + left\r\n    function isBooked2(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 2) === kayaksInStock) || ((kayaksBookedTotal + 3) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n        // 4 + left\r\n    function isBooked4(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 4) === kayaksInStock) || ((kayaksBookedTotal + 5) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n        // 6 + left\r\n    function isBooked6(day) {\r\n        let kayakCount = []\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let classes = null\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    let kayaksBookedTotal = kayakCount.reduce(reducer)\r\n                    \r\n                    if(((kayaksBookedTotal + 6) === kayaksInStock) || ((kayaksBookedTotal + 7) === kayaksInStock)) {\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n\r\n    function isGuided(day) {\r\n        let classes = null\r\n        const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n        let kayakCount = []\r\n\r\n        booked.forEach(bookedData => {\r\n            if (day.isSame(bookedData.date, 'day')) {\r\n                let parsedKayaks = JSON.parse(bookedData.numOfKayaks)\r\n                kayakCount.push(parsedKayaks)\r\n\r\n                if (kayakCount.length > 0){\r\n                    if (bookedData.name === 'guide1706'){\r\n                        classes = bookedData.date\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        return day.isSame(classes, 'day')\r\n    }\r\n\r\n\r\n    function dayStyles(day, value) {\r\n        if (beforeToday(day)) return 'before'\r\n        if (isSelected(day, value)) return 'red'\r\n        if (isToday(day)) return 'today'\r\n        if (isBooked0(day)) return 'kayaks-0'\r\n        if (isBooked2(day)) return 'kayaks-2'\r\n        if (isBooked4(day)) return 'kayaks-4'\r\n        if (isBooked6(day)) return 'kayaks-6'\r\n        return ''\r\n    }\r\n\r\n\r\n\r\n\r\n    function guideStyle(day, value) {\r\n        if (isGuided(day)) return 'guide-yes'\r\n        return 'guide-no'\r\n    }\r\n    function guideStyleForDay(day, value) {\r\n        if (isGuided(day)) return 'guide-no'\r\n        return 'guide-yes'\r\n    }\r\n\r\n\r\n\r\n\r\n    // const guideRouteHandler = (booked, value) => {\r\n    //     let select = 'no guide'\r\n\r\n    //     booked.forEach(bookingData => {\r\n    //         if ((bookingData.name === 'guide1706') && value.isSame(bookingData.date, 'day')){\r\n    //             select = bookingData.route\r\n    //         }\r\n    //     });\r\n\r\n    //     return select\r\n    // }\r\n\r\n\r\n\r\n    const backToHomeHandler = () => {\r\n        history.push('/')\r\n    }\r\n\r\n\r\n\r\n\r\n    return ( \r\n        <div className='full-calendar' >\r\n            <div className='top-half-calendar' >\r\n                <div className='selection-footer ' >\r\n                    <div className='info-text-header' >\r\n                        <h>Pick A Day</h>\r\n                    </div>\r\n                    <div className='parent' >\r\n                        <div className='info-text-header-underline' >o</div>\r\n                    </div>\r\n                    <div className='info-text-header-2' >\r\n                        <div>\r\n                            <h><FontAwesomeIcon icon=\"map-marker-alt\"  size=\"1x\" /> {routeSelected}</h>\r\n                        </div>\r\n                        <div>\r\n                            <h><FontAwesomeIcon icon=\"calendar-alt\"  size=\"1x\" /> Date: {value.format(\"MM/DD\")}</h>\r\n                        </div>\r\n                    </div>\r\n                    <div className='info-text' >\r\n\r\n                        <h6 className='cal-b-text' >Avalible: {kayaksLeft} kayaks</h6>\r\n                        <h6 className='cal-b-text' ><FontAwesomeIcon icon=\"compass\" size=\"1x\" /> Guide: {guidedRoute}</h6>\r\n                    </div>\r\n                    <div className='direction-buttons' >\r\n                        <div className='arrow' onClick={backToHomeHandler}   >\r\n                                <FontAwesomeIcon icon=\"arrow-left\" size=\"1x\" /> Back\r\n                        </div>\r\n                        <div className='arrow' onClick={() => setViewing(false)}  >\r\n                                Continue <FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='calendar'>\r\n                    <div className='header'>\r\n                        <div className='previous' onClick={() => !thisMonth() && onChange(prevMonth())}>\r\n                        {!thisMonth() ? <FontAwesomeIcon icon=\"arrow-left\" size=\"1x\" /> : null}\r\n                        </div>\r\n                        <div className='current'>\r\n                            {currMonthName()} {currYear()}\r\n                        </div>\r\n                        <div className='next' onClick={() => {onChange(nextMonth())}}><FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" /></div>\r\n                    </div>\r\n                    <div className='body'>\r\n                        <div className=\"day-names\">\r\n                            {\r\n                                [\"s\",\"m\",\"t\",\"w\",\"t\",\"f\",\"s\"].map(d => <div className='week'>{d}</div>)\r\n                            }\r\n                        </div>\r\n                        {calendar.map((week) => (\r\n                            <div>\r\n                                {week.map((day) => (\r\n                                    <div  className='day' id={day.format(\"D\")} key={day} \r\n                                    onClick={() => { !beforeToday(day) && onChange(day)\r\n                                        // console.log('clicked', day)\r\n                                        }}>\r\n                                        <div className={dayStyles(day, value)}>\r\n                                            <span className={guideStyleForDay(day, value)} >{day.format('D').toString()}</span>\r\n                                            <FontAwesomeIcon icon=\"compass\"  className={guideStyle(day, value)}  size=\"2x\" />\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='bottom-half-calendar' >\r\n                <Weather value={value} />\r\n            </div>\r\n            </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}