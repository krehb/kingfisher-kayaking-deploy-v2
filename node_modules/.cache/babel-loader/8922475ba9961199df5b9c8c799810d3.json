{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\src\\\\Componets\\\\Paypal\\\\payForm.js\";\nimport React, { useState } from 'react';\nimport { Form, Col, Container, Row, OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport firebase from 'firebase';\nimport moment from 'moment';\nimport emailjs from 'emailjs-com';\nimport Paypal from '../Paypal/Paypal';\n\nfunction PayFrom({\n  showForm,\n  kayaks,\n  route,\n  value,\n  kayaksInStock,\n  back,\n  showStore,\n  storePath,\n  setViewing,\n  setFormView\n}) {\n  const [tripName, SetTripName] = useState('no trip name');\n  const [kayaksTaking, setKayaksTaking] = useState();\n  const [startTime, setTime] = useState('not selected');\n  const [location, setLocation] = useState('not selected');\n  const [otherLoaction, SetOtherLocation] = useState('not selected');\n  const [email, setEmail] = useState('not selected');\n  const [ifChecked, setChecked] = useState(); // firebase requirements\n\n  const database = firebase.database();\n  const ref = database.ref('bookings');\n  const booking = {\n    route: route,\n    name: tripName,\n    numOfKayaks: kayaksTaking,\n    time: startTime,\n    pickUpLocation: location,\n    other: otherLoaction,\n    date: value.format(\"MM/DD/YY\"),\n    email: email,\n    timeBooked: moment().format('MMMM Do YYYY, h:mm:ss a')\n  }; //submitting form to firebase database\n\n  const submitHandler = () => {\n    if (kayaksTaking > 0 && ifChecked) {\n      console.log('booking sent');\n      ref.push(booking);\n    } else {\n      console.log('erroror');\n      console.log(ifChecked);\n    }\n  }; // dynamic Kayaks Option\n\n\n  let kayaksOptions = null; //rendering nonBooked days\n\n  let renderKayaksOptions = [];\n\n  for (let i = 0; i < kayaksInStock + 1; i++) {\n    renderKayaksOptions.push(i);\n    kayaksOptions = renderKayaksOptions.map(x => /*#__PURE__*/React.createElement(\"option\", {\n      value: x,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 50\n      }\n    }, x, \" kayak(s)\"));\n  } //rendering booked days\n\n\n  let datesBookArray = [];\n  let kayaksLeft = null;\n  let kayaksLeftArray = [];\n\n  const reducer = (accumulator, currentValue) => accumulator + currentValue; //when day is selected\n\n\n  kayaks.forEach(booking => {\n    if (value.isSame(booking.date, 'day')) {\n      let parsedKayaks = JSON.parse(booking.numOfKayaks);\n      datesBookArray.push(parsedKayaks);\n\n      if (datesBookArray.length > 1) {\n        // muliple bookings on single date\n        let kayaksBookedTotal = datesBookArray.reduce(reducer);\n        let calculatedLeft = kayaksInStock - kayaksBookedTotal;\n        kayaksLeft = calculatedLeft;\n      } else if (datesBookArray.length === 1) {\n        // single booking on single date\n        let calculatedLeft = kayaksInStock - parsedKayaks;\n        kayaksLeft = calculatedLeft;\n      }\n    }\n  }); // rendering the logic from above if selected day is booked\n\n  if (!(kayaksLeft === null)) {\n    for (let i = 0; i < kayaksLeft + 1; i++) {\n      kayaksLeftArray.push(i);\n    }\n\n    kayaksOptions = kayaksLeftArray.map(x => /*#__PURE__*/React.createElement(\"option\", {\n      value: x,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 50\n      }\n    }, x, \" kayak(s)\"));\n  }\n\n  function sendEmail(e) {\n    e.preventDefault();\n    console.log('was clicked');\n    emailjs.sendForm('service_n7gxrhi', 'template_eay3k5p', e.target, 'user_eKTDTnT6b5suYFim5twvR').then(result => {\n      console.log(result.text);\n    }, error => {\n      console.log(error.text);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"form shadow\",\n    onSubmit: sendEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    value: route,\n    name: \"route\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    value: value.format('MM/DD/yy'),\n    name: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"user_name\",\n    value: tripName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"user_email\",\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"kayaksTaking\",\n    value: kayaksTaking,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"location\",\n    value: location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"otherLocation\",\n    value: otherLoaction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"startTime\",\n    value: startTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, \"Confirm & Pay\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"map-marker-alt\",\n    size: \"1x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 25\n    }\n  }), \" \", route, \" on \", value.format('MM/DD/yy'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-body-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"Ned Flanders\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, \"didlydo@yahoo.com\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, \"At LincolnSquare Mall at 8am\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Paypal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrow\",\n    onClick: () => setFormView(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: \"arrow-left\",\n    size: \"1x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 25\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 74\n    }\n  }, \" Back \")))))));\n}\n\nexport default PayFrom;","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/Paypal/payForm.js"],"names":["React","useState","Form","Col","Container","Row","OverlayTrigger","Tooltip","FontAwesomeIcon","firebase","moment","emailjs","Paypal","PayFrom","showForm","kayaks","route","value","kayaksInStock","back","showStore","storePath","setViewing","setFormView","tripName","SetTripName","kayaksTaking","setKayaksTaking","startTime","setTime","location","setLocation","otherLoaction","SetOtherLocation","email","setEmail","ifChecked","setChecked","database","ref","booking","name","numOfKayaks","time","pickUpLocation","other","date","format","timeBooked","submitHandler","console","log","push","kayaksOptions","renderKayaksOptions","i","map","x","datesBookArray","kayaksLeft","kayaksLeftArray","reducer","accumulator","currentValue","forEach","isSame","parsedKayaks","JSON","parse","length","kayaksBookedTotal","reduce","calculatedLeft","sendEmail","e","preventDefault","sendForm","target","then","result","text","error"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport { Form, Col, Container, Row, OverlayTrigger, Tooltip } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport firebase from 'firebase';\r\nimport moment from 'moment';\r\nimport emailjs from 'emailjs-com';\r\nimport Paypal from '../Paypal/Paypal';\r\n\r\n\r\n\r\nfunction PayFrom({showForm, kayaks, route, value, kayaksInStock , back, showStore, storePath, setViewing, setFormView }) {\r\n\r\n    const [tripName, SetTripName] = useState('no trip name');\r\n    const [kayaksTaking, setKayaksTaking] = useState();\r\n    const [startTime, setTime] = useState('not selected');\r\n    const [location, setLocation] = useState('not selected');\r\n    const [otherLoaction, SetOtherLocation] = useState('not selected');\r\n    const [email, setEmail] = useState('not selected');\r\n    const [ifChecked, setChecked] = useState();\r\n\r\n\r\n\r\n  // firebase requirements\r\n  const database = firebase.database();\r\n  const ref = database.ref('bookings');\r\n\r\n\r\n  const booking = {\r\n    route: route,\r\n    name: tripName,\r\n    numOfKayaks: kayaksTaking,\r\n    time: startTime,\r\n    pickUpLocation: location,\r\n    other: otherLoaction,\r\n    date: value.format(\"MM/DD/YY\"),\r\n    email: email,\r\n    timeBooked: moment().format('MMMM Do YYYY, h:mm:ss a')\r\n  }\r\n\r\n  //submitting form to firebase database\r\n  const submitHandler = () => {\r\n    if(kayaksTaking > 0 && ifChecked){\r\n      console.log('booking sent');\r\n      ref.push(booking);\r\n    } else {\r\n      console.log('erroror')\r\n      console.log(ifChecked)\r\n    }\r\n  }\r\n\r\n\r\n\r\n// dynamic Kayaks Option\r\n  let kayaksOptions = null\r\n\r\n  //rendering nonBooked days\r\n  let renderKayaksOptions = []\r\n  for (let i = 0; i < kayaksInStock + 1; i++){\r\n    renderKayaksOptions.push(i)\r\n    kayaksOptions = renderKayaksOptions.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n  }\r\n\r\n\r\n  //rendering booked days\r\n  let datesBookArray = []\r\n  let kayaksLeft = null\r\n  let kayaksLeftArray = []\r\n  const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\n    //when day is selected\r\n    kayaks.forEach(booking => {\r\n        if (value.isSame(booking.date, 'day') ) {\r\n            let parsedKayaks = JSON.parse(booking.numOfKayaks)\r\n            datesBookArray.push(parsedKayaks)\r\n\r\n            if(datesBookArray.length > 1){\r\n                // muliple bookings on single date\r\n                let kayaksBookedTotal = datesBookArray.reduce(reducer)\r\n                let calculatedLeft = kayaksInStock - kayaksBookedTotal\r\n                kayaksLeft = calculatedLeft\r\n\r\n            } else if (datesBookArray.length === 1){\r\n                // single booking on single date\r\n                let calculatedLeft = kayaksInStock - parsedKayaks\r\n                kayaksLeft = calculatedLeft\r\n            }\r\n        }\r\n    });\r\n\r\n    // rendering the logic from above if selected day is booked\r\n    if (!(kayaksLeft === null)){\r\n        for (let i = 0; i < kayaksLeft + 1; i++){\r\n            kayaksLeftArray.push(i)\r\n        }\r\n        kayaksOptions = kayaksLeftArray.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    function sendEmail(e) {\r\n        e.preventDefault();\r\n        console.log('was clicked')\r\n        emailjs.sendForm('service_n7gxrhi', 'template_eay3k5p', e.target, 'user_eKTDTnT6b5suYFim5twvR')\r\n          .then((result) => {\r\n              console.log(result.text);\r\n          }, (error) => {\r\n              console.log(error.text);\r\n          });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n        <Container fluid >\r\n        <Row className=\"justify-content-md-center\">\r\n            <Form  className='form shadow' onSubmit={sendEmail}>\r\n                <input type=\"hidden\" value={route} name=\"route\" />\r\n                <input type=\"hidden\" value={value.format('MM/DD/yy')} name=\"date\" />\r\n                <input type=\"hidden\" name=\"user_name\" value={tripName} />\r\n                <input type=\"hidden\" name=\"user_email\" value={email} />\r\n                <input type=\"hidden\" name=\"kayaksTaking\" value={kayaksTaking} />\r\n                <input type=\"hidden\" name=\"location\" value={location} />\r\n                <input type=\"hidden\" name=\"otherLocation\" value={otherLoaction} />\r\n                <input type=\"hidden\" name=\"startTime\" value={startTime} />\r\n\r\n                <div>\r\n                    <div className='info-form' >\r\n                        Confirm & Pay\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <div className='header-form' >\r\n                        <FontAwesomeIcon icon=\"map-marker-alt\"  size=\"1x\" /> {route} on {value.format('MM/DD/yy')}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='form-body-top' >\r\n        \r\n                    <p>Ned Flanders</p>\r\n                    <p>didlydo@yahoo.com</p>\r\n                    <p>At LincolnSquare Mall at 8am</p>\r\n                </div>\r\n\r\n\r\n\r\n\r\n                <div>\r\n                    <Paypal/>\r\n                </div>\r\n                \r\n\r\n                <div className='nav-buttons' >\r\n                    <div className='arrow' onClick={() => setFormView(true)}>\r\n                        <FontAwesomeIcon icon=\"arrow-left\"  size=\"1x\" /> <span> Back </span>\r\n                    </div>\r\n                    {/* <div className='arrow' onClick={() => setFormView(false)}>\r\n                        <FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" /> <span> Continue </span>\r\n                    </div> */}\r\n                </div>\r\n            </Form>\r\n        </Row>\r\n    </Container>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PayFrom;"]},"metadata":{},"sourceType":"module"}