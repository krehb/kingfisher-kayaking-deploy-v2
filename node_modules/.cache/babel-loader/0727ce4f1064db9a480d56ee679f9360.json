{"ast":null,"code":"import _objectWithoutProperties from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Form,Col,Container,Row,OverlayTrigger,Tooltip,Alert}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import firebase from'firebase';import moment from'moment';import'./SelectionForm.css';import emailjs from'emailjs-com';import Paypal from'../Paypal/Paypal';function SelectionFrom(_ref){var kayaks=_ref.kayaks,route=_ref.route,value=_ref.value,kayaksInStock=_ref.kayaksInStock,setViewing=_ref.setViewing,setFormView=_ref.setFormView,setFormData=_ref.setFormData;var _useState=useState('no trip name'),_useState2=_slicedToArray(_useState,2),tripName=_useState2[0],SetTripName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),kayaksTaking=_useState4[0],setKayaksTaking=_useState4[1];var _useState5=useState('8am'),_useState6=_slicedToArray(_useState5,2),startTime=_useState6[0],setTime=_useState6[1];var _useState7=useState('MarketPlace Mall (North East Corner)'),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState('not selected'),_useState10=_slicedToArray(_useState9,2),otherLoaction=_useState10[0],SetOtherLocation=_useState10[1];var _useState11=useState('not selected'),_useState12=_slicedToArray(_useState11,2),email=_useState12[0],setEmail=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),ifChecked=_useState14[0],setChecked=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),alertCheck=_useState16[0],setAlertCheck=_useState16[1];// firebase requirements\nvar database=firebase.database();var ref=database.ref('bookings');var booking={route:route,name:tripName,numOfKayaks:kayaksTaking,time:startTime,pickUpLocation:location,other:otherLoaction,date:value.format(\"MM/DD/YY\"),email:email,timeBooked:moment().format('MMMM Do YYYY, h:mm:ss a')};//submitting form to firebase database\nvar submitHandler=function submitHandler(){if(kayaksTaking>0&&ifChecked){console.log('booking sent');ref.push(booking);}else{console.log('erroror');console.log(ifChecked);}};//render error if form isn't fully filled\nvar continueButtonHandler=function continueButtonHandler(){if(kayaksTaking===0||kayaksTaking===undefined||email===''||email==='not selected'||ifChecked===undefined||ifChecked===false||tripName==='no trip name'){setAlertCheck(true);}else{setFormView(false);setAlertCheck(false);setFormData(booking);}};var ifAlert=null;if(alertCheck){ifAlert=/*#__PURE__*/React.createElement(Alert,{variant:\"warning\"},\"You need to fill out the whole form and agree to continue\");}else{ifAlert=null;}// dynamic Kayaks Option\nvar kayaksOptions=null;//rendering nonBooked days\nvar renderKayaksOptions=[];for(var i=0;i<kayaksInStock+1;i++){renderKayaksOptions.push(i);kayaksOptions=renderKayaksOptions.map(function(x){return/*#__PURE__*/React.createElement(\"option\",{value:x},x,\" kayak(s)\");});}//rendering booked days\nvar datesBookArray=[];var kayaksLeft=null;var kayaksLeftArray=[];var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};//when day is selected\nkayaks.forEach(function(booking){if(value.isSame(booking.date,'day')){var parsedKayaks=JSON.parse(booking.numOfKayaks);datesBookArray.push(parsedKayaks);if(datesBookArray.length>1){// muliple bookings on single date\nvar kayaksBookedTotal=datesBookArray.reduce(reducer);var calculatedLeft=kayaksInStock-kayaksBookedTotal;kayaksLeft=calculatedLeft;}else if(datesBookArray.length===1){// single booking on single date\nvar _calculatedLeft=kayaksInStock-parsedKayaks;kayaksLeft=_calculatedLeft;}}});// rendering the logic from above if selected day is booked\nif(!(kayaksLeft===null)){for(var _i=0;_i<kayaksLeft+1;_i++){kayaksLeftArray.push(_i);}kayaksOptions=kayaksLeftArray.map(function(x){return/*#__PURE__*/React.createElement(\"option\",{value:x},x,\" kayak(s)\");});}function sendEmail(e){e.preventDefault();console.log('was clicked');emailjs.sendForm('service_n7gxrhi','template_eay3k5p',e.target,'user_eKTDTnT6b5suYFim5twvR').then(function(result){console.log(result.text);},function(error){console.log(error.text);});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center\"},/*#__PURE__*/React.createElement(Form,{className:\"form shadow\",onSubmit:sendEmail},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",value:route,name:\"route\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",value:value.format('MM/DD/yy'),name:\"date\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"user_name\",value:tripName}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"user_email\",value:email}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"kayaksTaking\",value:kayaksTaking}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"location\",value:location}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"otherLocation\",value:otherLoaction}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"startTime\",value:startTime}),/*#__PURE__*/React.createElement(\"div\",null,ifAlert),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"info-form\"},\"Fill Out Info\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"header-form\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"map-marker-alt\",size:\"1x\"}),\" \",route,\" on \",value.format('MM/DD/yy'))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-body-top\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridname\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Ned Flanders\",onChange:function onChange(e){SetTripName(e.target.value);}}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridphone\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"didlydo@yahoo.com\",onChange:function onChange(e){setEmail(e.target.value);}})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"header-form\"},/*#__PURE__*/React.createElement(OverlayTrigger,{placement:\"top\",overlay:/*#__PURE__*/React.createElement(Tooltip,{id:\"tooltip\"},\"This is where we will pick you up for the start of the trip\")},function(_ref2){var ref=_ref2.ref,triggerHandler=_objectWithoutProperties(_ref2,[\"ref\"]);return/*#__PURE__*/React.createElement(\"div\",Object.assign({variant:\"light\"},triggerHandler,{className:\"d-inline-flex align-items-center\",ref:ref}),\"Pick Up Location\");}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-body-middle\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setLocation(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",null,\"MarketPlace Mall (North East Corner)\"),/*#__PURE__*/React.createElement(\"option\",null,\"LincolnSquare Mall (South Side)\"),/*#__PURE__*/React.createElement(\"option\",null,\"Savoy Walmart (North East Corner)\"),/*#__PURE__*/React.createElement(\"option\",null,\"Other (enter address below)\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridname\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"if selected 'Other'\",onChange:function onChange(e){SetOtherLocation(e.target.value);}})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"header-form\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"form-text\"},\"Start Time\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-body-bottom\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setTime(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",null,\"8:00 am\"),/*#__PURE__*/React.createElement(\"option\",null,\"9:30 am\"),/*#__PURE__*/React.createElement(\"option\",null,\"11:00 am\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"formGridPassword\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Choose...\",onChange:function onChange(e){setKayaksTaking(e.target.value);}},kayaksOptions)))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Group,{id:\"formGridCheckbox\"},/*#__PURE__*/React.createElement(\"a\",{target:\"blank\",href:'https://media.makeameme.org/created/haha-got-you.jpg'},/*#__PURE__*/React.createElement(Form.Check,{onChange:function onChange(e){setChecked(e.target.checked);},type:\"checkbox\",label:\"I agree to KingFisher Kayaking Terms of Service\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"nav-buttons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:function onClick(){return setViewing(true);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-left\",size:\"1x\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\" Back \")),/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\",onClick:continueButtonHandler},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:\"arrow-right\",size:\"1x\"}),\" \",/*#__PURE__*/React.createElement(\"span\",null,\" Continue \")))))));}export default SelectionFrom;","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/SelectionForm/SelectionForm.js"],"names":["React","useState","Form","Col","Container","Row","OverlayTrigger","Tooltip","Alert","FontAwesomeIcon","firebase","moment","emailjs","Paypal","SelectionFrom","kayaks","route","value","kayaksInStock","setViewing","setFormView","setFormData","tripName","SetTripName","kayaksTaking","setKayaksTaking","startTime","setTime","location","setLocation","otherLoaction","SetOtherLocation","email","setEmail","ifChecked","setChecked","alertCheck","setAlertCheck","database","ref","booking","name","numOfKayaks","time","pickUpLocation","other","date","format","timeBooked","submitHandler","console","log","push","continueButtonHandler","undefined","ifAlert","kayaksOptions","renderKayaksOptions","i","map","x","datesBookArray","kayaksLeft","kayaksLeftArray","reducer","accumulator","currentValue","forEach","isSame","parsedKayaks","JSON","parse","length","kayaksBookedTotal","reduce","calculatedLeft","sendEmail","e","preventDefault","sendForm","target","then","result","text","error","triggerHandler","checked"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport { Form, Col, Container, Row, OverlayTrigger, Tooltip, Alert } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport firebase from 'firebase';\r\nimport moment from 'moment';\r\nimport './SelectionForm.css';\r\nimport emailjs from 'emailjs-com';\r\nimport Paypal from '../Paypal/Paypal';\r\n\r\n\r\n\r\nfunction SelectionFrom({ kayaks, route, value, kayaksInStock, setViewing, setFormView, setFormData }) {\r\n\r\n    const [tripName, SetTripName] = useState('no trip name');\r\n    const [kayaksTaking, setKayaksTaking] = useState();\r\n    const [startTime, setTime] = useState('8am');\r\n    const [location, setLocation] = useState('MarketPlace Mall (North East Corner)');\r\n    const [otherLoaction, SetOtherLocation] = useState('not selected');\r\n    const [email, setEmail] = useState('not selected');\r\n    const [ifChecked, setChecked] = useState();\r\n    const [alertCheck, setAlertCheck] = useState(false);\r\n\r\n\r\n  // firebase requirements\r\n  const database = firebase.database();\r\n  const ref = database.ref('bookings');\r\n\r\n\r\n  const booking = {\r\n    route: route,\r\n    name: tripName,\r\n    numOfKayaks: kayaksTaking,\r\n    time: startTime,\r\n    pickUpLocation: location,\r\n    other: otherLoaction,\r\n    date: value.format(\"MM/DD/YY\"),\r\n    email: email,\r\n    timeBooked: moment().format('MMMM Do YYYY, h:mm:ss a')\r\n  }\r\n\r\n  //submitting form to firebase database\r\n  const submitHandler = () => {\r\n    if(kayaksTaking > 0 && ifChecked){\r\n      console.log('booking sent');\r\n      ref.push(booking);\r\n    } else {\r\n      console.log('erroror')\r\n      console.log(ifChecked)\r\n    }\r\n  }\r\n\r\n\r\n  //render error if form isn't fully filled\r\n  const continueButtonHandler = () => {\r\n      if(kayaksTaking === 0 || kayaksTaking === undefined || email === '' || email === 'not selected' || ifChecked === undefined || ifChecked === false || tripName === 'no trip name'){\r\n          setAlertCheck(true)\r\n      } else {\r\n          setFormView(false)\r\n          setAlertCheck(false)\r\n          setFormData(booking)\r\n      }\r\n  }\r\n\r\n  let ifAlert = null\r\n  if(alertCheck){\r\n    ifAlert = (\r\n        <Alert  variant='warning'>\r\n            You need to fill out the whole form and agree to continue\r\n        </Alert>\r\n      )\r\n  } else {\r\n      ifAlert = null\r\n  }\r\n\r\n\r\n\r\n// dynamic Kayaks Option\r\n  let kayaksOptions = null\r\n\r\n  //rendering nonBooked days\r\n  let renderKayaksOptions = []\r\n  for (let i = 0; i < kayaksInStock + 1; i++){\r\n    renderKayaksOptions.push(i)\r\n    kayaksOptions = renderKayaksOptions.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n  }\r\n\r\n\r\n  //rendering booked days\r\n  let datesBookArray = []\r\n  let kayaksLeft = null\r\n  let kayaksLeftArray = []\r\n  const reducer = (accumulator, currentValue) => accumulator + currentValue;\r\n\r\n    //when day is selected\r\n    kayaks.forEach(booking => {\r\n        if (value.isSame(booking.date, 'day') ) {\r\n            let parsedKayaks = JSON.parse(booking.numOfKayaks)\r\n            datesBookArray.push(parsedKayaks)\r\n\r\n            if(datesBookArray.length > 1){\r\n                // muliple bookings on single date\r\n                let kayaksBookedTotal = datesBookArray.reduce(reducer)\r\n                let calculatedLeft = kayaksInStock - kayaksBookedTotal\r\n                kayaksLeft = calculatedLeft\r\n\r\n            } else if (datesBookArray.length === 1){\r\n                // single booking on single date\r\n                let calculatedLeft = kayaksInStock - parsedKayaks\r\n                kayaksLeft = calculatedLeft\r\n            }\r\n        }\r\n    });\r\n\r\n    // rendering the logic from above if selected day is booked\r\n    if (!(kayaksLeft === null)){\r\n        for (let i = 0; i < kayaksLeft + 1; i++){\r\n            kayaksLeftArray.push(i)\r\n        }\r\n        kayaksOptions = kayaksLeftArray.map(x=> (<option value={x} >{x} kayak(s)</option>))\r\n    }\r\n\r\n\r\n\r\n    function sendEmail(e) {\r\n        e.preventDefault();\r\n        console.log('was clicked')\r\n        emailjs.sendForm('service_n7gxrhi', 'template_eay3k5p', e.target, 'user_eKTDTnT6b5suYFim5twvR')\r\n          .then((result) => {\r\n              console.log(result.text);\r\n          }, (error) => {\r\n              console.log(error.text);\r\n          });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Container fluid >\r\n            <Row className=\"justify-content-md-center\">\r\n                <Form  className='form shadow' onSubmit={sendEmail}>\r\n                    <input type=\"hidden\" value={route} name=\"route\" />\r\n                    <input type=\"hidden\" value={value.format('MM/DD/yy')} name=\"date\" />\r\n                    <input type=\"hidden\" name=\"user_name\" value={tripName} />\r\n                    <input type=\"hidden\" name=\"user_email\" value={email} />\r\n                    <input type=\"hidden\" name=\"kayaksTaking\" value={kayaksTaking} />\r\n                    <input type=\"hidden\" name=\"location\" value={location} />\r\n                    <input type=\"hidden\" name=\"otherLocation\" value={otherLoaction} />\r\n                    <input type=\"hidden\" name=\"startTime\" value={startTime} />\r\n\r\n                    <div>\r\n                        {ifAlert}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className='info-form' >\r\n                            Fill Out Info\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className='header-form' >\r\n                            <FontAwesomeIcon icon=\"map-marker-alt\"  size=\"1x\" /> {route} on {value.format('MM/DD/yy')}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className='form-body-top' >\r\n                        <div>\r\n                            <Form.Group as={Col} controlId=\"formGridname\">\r\n                                <Form.Control type=\"text\" placeholder=\"Ned Flanders\" onChange={(e)=> {SetTripName(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </div>\r\n                        <div>\r\n                            <Form.Group as={Col} controlId=\"formGridphone\">\r\n                                <Form.Control type=\"email\" placeholder=\"didlydo@yahoo.com\" onChange={(e) => {setEmail(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className='header-form' >\r\n                            <OverlayTrigger\r\n                                placement=\"top\"\r\n                                overlay={<Tooltip id=\"tooltip\">This is where we will pick you up for the start of the trip</Tooltip>}\r\n                            >\r\n                                {({ ref, ...triggerHandler }) => (\r\n                                <div variant=\"light\"\r\n                                    {...triggerHandler}\r\n                                    className=\"d-inline-flex align-items-center\" ref={ref} \r\n                                >Pick Up Location</div>\r\n                                )}\r\n                            </OverlayTrigger>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className='form-body-middle' >\r\n                        <div>\r\n                            <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e) => {setLocation(e.target.value)}}>\r\n                                <option>MarketPlace Mall (North East Corner)</option>\r\n                                <option>LincolnSquare Mall (South Side)</option>\r\n                                <option>Savoy Walmart (North East Corner)</option>\r\n                                <option>Other (enter address below)</option>\r\n                            </Form.Control>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Form.Group as={Col} controlId=\"formGridname\">\r\n                                <Form.Control type=\"text\" placeholder=\"if selected 'Other'\" onChange={(e)=> {SetOtherLocation(e.target.value)}} />\r\n                            </Form.Group>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className='header-form' >\r\n                            <Form.Label className='form-text'>Start Time</Form.Label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div  className='form-body-bottom'>\r\n                        <div >\r\n                            <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e)=> {setTime(e.target.value)}}>\r\n                                <option>8:00 am</option>\r\n                                <option>9:30 am</option>\r\n                                <option>11:00 am</option>\r\n                            </Form.Control>\r\n                        </div>\r\n                        <div>\r\n                            <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                                <Form.Control as=\"select\" defaultValue=\"Choose...\"  onChange={(e)=> {setKayaksTaking(e.target.value)}}>\r\n                                    {kayaksOptions}\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Form.Group id=\"formGridCheckbox\" >\r\n                            <a target='blank' href={'https://media.makeameme.org/created/haha-got-you.jpg'} >\r\n                                <Form.Check onChange={(e) => {setChecked(e.target.checked)}}  type=\"checkbox\" label=\"I agree to KingFisher Kayaking Terms of Service\" />\r\n                            </a>\r\n                        </Form.Group>\r\n\r\n                    </div>\r\n\r\n                    <div className='nav-buttons' >\r\n                        <div className='arrow' onClick={() => setViewing(true)}>\r\n                            <FontAwesomeIcon icon=\"arrow-left\"  size=\"1x\" /> <span> Back </span>\r\n                        </div>\r\n                        <div className='arrow' onClick={continueButtonHandler}>\r\n                            <FontAwesomeIcon icon=\"arrow-right\"  size=\"1x\" /> <span> Continue </span>\r\n                        </div>\r\n                    </div>\r\n                </Form>\r\n            </Row>\r\n        </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SelectionFrom;"]},"metadata":{},"sourceType":"module"}