{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useRef,useEffect,useState}from'react';import emailjs from'emailjs-com';import{useHistory}from'react-router-dom';import firebase from'firebase';export default function Paypal(_ref){var formData=_ref.formData,priceTotal=_ref.priceTotal;var paypal=useRef();//going to success page after payment\nvar history=useHistory();function handleClick(){history.push(\"/success\");}useEffect(function(){var total=priceTotal;//sending payment through paypal\nwindow.paypal.Buttons({createOrder:function createOrder(data,actions,err){return actions.order.create({intent:'CAPTURE',purchase_units:[{description:\"Cool and accurate kit\",amount:{currency_code:'USD',value:1}}]});},onApprove:function(){var _onApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data,actions){var order;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.order.capture();case 2:order=_context.sent;console.log(order);case 4:case\"end\":return _context.stop();}}},_callee);}));function onApprove(_x,_x2){return _onApprove.apply(this,arguments);}return onApprove;}(),onError:function onError(err){console.log(err);}}).render(paypal.current);},[]);// firebase requirements\nvar database=firebase.database();var ref=database.ref('bookings');//submitting form to firebase database\nvar submitHandler=function submitHandler(){console.log('booking sent to database');console.log(formData);// pushing data to database\nref.push(formData);};function sendEmail(e){e.preventDefault();console.log('was clicked');submitHandler();emailjs.sendForm('service_n7gxrhi','template_eay3k5p',e.target,'user_eKTDTnT6b5suYFim5twvR').then(function(result){console.log(result.text);console.log('was emailed');},function(error){console.log(error.text);});history.push('/success');}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{ref:paypal}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:sendEmail},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",value:formData.route,name:\"route\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",value:formData.date,name:\"date\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"user_name\",value:formData.name}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"user_email\",value:formData.email}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"kayaksTaking\",value:formData.numOfKayaks}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"location\",value:formData.pickUpLocation}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"otherLocation\",value:formData.other}),/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"startTime\",value:formData.time}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",value:\"send\"},\"Fake Pay\"))));}","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/Paypal/Paypal.js"],"names":["React","useRef","useEffect","useState","emailjs","useHistory","firebase","Paypal","formData","priceTotal","paypal","history","handleClick","push","total","window","Buttons","createOrder","data","actions","err","order","create","intent","purchase_units","description","amount","currency_code","value","onApprove","capture","console","log","onError","render","current","database","ref","submitHandler","sendEmail","e","preventDefault","sendForm","target","then","result","text","error","route","date","name","email","numOfKayaks","pickUpLocation","other","time"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState} from 'react';\r\nimport emailjs from 'emailjs-com';\r\nimport {useHistory} from 'react-router-dom';\r\nimport firebase from 'firebase';\r\n\r\n\r\nexport default function Paypal( {formData, priceTotal} ) {\r\n    \r\n    const paypal = useRef()\r\n    //going to success page after payment\r\n    let history = useHistory();\r\n\r\n    function handleClick() {\r\n      history.push(\"/success\");\r\n    }\r\n    \r\n\r\n\r\n\r\n    useEffect(()=> {\r\n\r\n\r\n\r\n        let total = priceTotal\r\n\r\n\r\n\r\n        //sending payment through paypal\r\n        window.paypal.Buttons({\r\n            createOrder: (data, actions, err) => {\r\n                return actions.order.create({\r\n                    intent: 'CAPTURE',\r\n                    purchase_units: [\r\n                        {\r\n                            description: \"Cool and accurate kit\",\r\n                            amount: {\r\n                                currency_code: 'USD',\r\n                                value: 1\r\n                            }  \r\n                        }\r\n                    ]\r\n                })\r\n            },\r\n            onApprove: async (data, actions) => {\r\n                const order = await actions.order.capture()\r\n                console.log(order)\r\n            },\r\n            onError: (err) => {\r\n                console.log(err)\r\n            }\r\n        }).render(paypal.current)\r\n    },[])\r\n\r\n\r\n\r\n\r\n    // firebase requirements\r\n    const database = firebase.database();\r\n    const ref = database.ref('bookings');\r\n\r\n      //submitting form to firebase database\r\n    const submitHandler = () => {\r\n        console.log('booking sent to database');\r\n        console.log(formData);\r\n        // pushing data to database\r\n        ref.push(formData);\r\n    }\r\n\r\n    function sendEmail(e) {\r\n        e.preventDefault();\r\n        console.log('was clicked')\r\n        submitHandler();\r\n\r\n        emailjs.sendForm('service_n7gxrhi', 'template_eay3k5p', e.target, 'user_eKTDTnT6b5suYFim5twvR')\r\n            .then((result) => {\r\n                console.log(result.text);\r\n                console.log('was emailed')\r\n            }, (error) => {\r\n                console.log(error.text);\r\n            });\r\n\r\n        history.push('/success');\r\n    }\r\n\r\n    \r\n    return (\r\n        <div>\r\n            <div ref={paypal} ></div>\r\n            <div>\r\n                <form onSubmit={sendEmail}>\r\n                    <input type=\"hidden\" value={formData.route} name=\"route\" />\r\n                    <input type=\"hidden\" value={formData.date} name=\"date\" />\r\n                    <input type=\"hidden\" name=\"user_name\" value={formData.name} />\r\n                    <input type=\"hidden\" name=\"user_email\" value={formData.email} />\r\n                    <input type=\"hidden\" name=\"kayaksTaking\" value={formData.numOfKayaks} />\r\n                    <input type=\"hidden\" name=\"location\" value={formData.pickUpLocation} />\r\n                    <input type=\"hidden\" name=\"otherLocation\" value={formData.other} />\r\n                    <input type=\"hidden\" name=\"startTime\" value={formData.time} />\r\n                    <button type=\"submit\" value=\"send\" >Fake Pay</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}