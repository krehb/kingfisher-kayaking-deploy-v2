{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jdk17\\\\Desktop\\\\KingFisher\\\\kingfisher-kayaking\\\\src\\\\Componets\\\\Paypal\\\\Paypal.js\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport emailjs from 'emailjs-com';\nimport { useHistory } from 'react-router-dom';\nimport firebase from 'firebase';\nexport default function Paypal({\n  formData,\n  priceTotal\n}) {\n  const paypal = useRef();\n  const [currentUser, setCurrentUser] = useState('no email yet');\n  const [sendingCart, setSendingCart] = useState(''); //going to success page after payment\n\n  let history = useHistory();\n\n  function handleClick() {\n    history.push(\"/success\");\n  }\n\n  const sendConfirmationEmail = () => {// if (cart.length > 0){\n    //     var templateParams = {\n    //         name: 'James',\n    //         email: currentUser.email,\n    //         cart: sendingCart,\n    //         total_price: priceTotal,\n    //         shipping: '217 Pleasant St.',\n    //     };\n    //     emailjs.send('service_12x6qif', 'template_5h83g8t', templateParams , 'user_CqDTkQBUriwIbjinTaVaw')\n    //         .then(function(response) {\n    //            console.log('SUCCESS!', response.status, response.text);\n    //         }, function(error) {\n    //            console.log('FAILED...', error);\n    //         });\n    // } else {\n    //     console.log('no items in the cart')\n    // }\n  };\n\n  useEffect(() => {\n    //checking if there's a user logged in\n    // app.auth().onAuthStateChanged((user) => {\n    //     setCurrentUser(user);\n    // })\n    // let newArray = []\n    // cart.forEach(item => {\n    //     newArray.push(` ${item.title} ${item.subtitle} ${item.test * item.qty} tests for $${item.price * item.qty}.00    |`)\n    // });\n    // setSendingCart(newArray.join(' '))\n    let total = priceTotal; //sending payment through paypal\n\n    window.paypal.Buttons({\n      createOrder: (data, actions, err) => {\n        return actions.order.create({\n          intent: 'CAPTURE',\n          purchase_units: [{\n            description: \"Cool and accurate kit\",\n            amount: {\n              currency_code: 'USD',\n              value: 1\n            }\n          }]\n        });\n      },\n      onApprove: async (data, actions) => {\n        const order = await actions.order.capture();\n        console.log(order);\n        sendConfirmationEmail();\n      },\n      onError: err => {\n        console.log(err);\n      }\n    }).render(paypal.current);\n  }, []); // firebase requirements\n\n  const database = firebase.database();\n  const ref = database.ref('bookings'); //submitting form to firebase database\n\n  const submitHandler = () => {\n    console.log('booking sent');\n    console.log(formData); // ref.push(formData);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: paypal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \"pretend pay\")));\n}","map":{"version":3,"sources":["C:/Users/jdk17/Desktop/KingFisher/kingfisher-kayaking/src/Componets/Paypal/Paypal.js"],"names":["React","useRef","useEffect","useState","emailjs","useHistory","firebase","Paypal","formData","priceTotal","paypal","currentUser","setCurrentUser","sendingCart","setSendingCart","history","handleClick","push","sendConfirmationEmail","total","window","Buttons","createOrder","data","actions","err","order","create","intent","purchase_units","description","amount","currency_code","value","onApprove","capture","console","log","onError","render","current","database","ref","submitHandler"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,MAAf,EAAuBC,SAAvB,EAAkCC,QAAlC,QAAiD,OAAjD;AACA,OAAOC,OAAP,MAAoB,aAApB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAGA,eAAe,SAASC,MAAT,CAAiB;AAACC,EAAAA,QAAD;AAAWC,EAAAA;AAAX,CAAjB,EAA0C;AAErD,QAAMC,MAAM,GAAGT,MAAM,EAArB;AACA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCT,QAAQ,CAAC,cAAD,CAA9C;AACA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,EAAD,CAA9C,CAJqD,CAMrD;;AACA,MAAIY,OAAO,GAAGV,UAAU,EAAxB;;AAEA,WAASW,WAAT,GAAuB;AACrBD,IAAAA,OAAO,CAACE,IAAR,CAAa,UAAb;AACD;;AAED,QAAMC,qBAAqB,GAAG,MAAM,CAEhC;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEH,GAzBD;;AA4BAhB,EAAAA,SAAS,CAAC,MAAK;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAIiB,KAAK,GAAGV,UAAZ,CAZW,CAgBX;;AACAW,IAAAA,MAAM,CAACV,MAAP,CAAcW,OAAd,CAAsB;AAClBC,MAAAA,WAAW,EAAE,CAACC,IAAD,EAAOC,OAAP,EAAgBC,GAAhB,KAAwB;AACjC,eAAOD,OAAO,CAACE,KAAR,CAAcC,MAAd,CAAqB;AACxBC,UAAAA,MAAM,EAAE,SADgB;AAExBC,UAAAA,cAAc,EAAE,CACZ;AACIC,YAAAA,WAAW,EAAE,uBADjB;AAEIC,YAAAA,MAAM,EAAE;AACJC,cAAAA,aAAa,EAAE,KADX;AAEJC,cAAAA,KAAK,EAAE;AAFH;AAFZ,WADY;AAFQ,SAArB,CAAP;AAYH,OAdiB;AAelBC,MAAAA,SAAS,EAAE,OAAOX,IAAP,EAAaC,OAAb,KAAyB;AAChC,cAAME,KAAK,GAAG,MAAMF,OAAO,CAACE,KAAR,CAAcS,OAAd,EAApB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ;AACAR,QAAAA,qBAAqB;AACxB,OAnBiB;AAoBlBoB,MAAAA,OAAO,EAAGb,GAAD,IAAS;AACdW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AACH;AAtBiB,KAAtB,EAuBGc,MAvBH,CAuBU7B,MAAM,CAAC8B,OAvBjB;AAwBH,GAzCQ,EAyCP,EAzCO,CAAT,CAzCqD,CAuFvD;;AACA,QAAMC,QAAQ,GAAGnC,QAAQ,CAACmC,QAAT,EAAjB;AACA,QAAMC,GAAG,GAAGD,QAAQ,CAACC,GAAT,CAAa,UAAb,CAAZ,CAzFuD,CA2FnD;;AACJ,QAAMC,aAAa,GAAG,MAAM;AAC1BP,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY7B,QAAZ,EAF0B,CAG1B;AACD,GAJD;;AAOE,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAEE,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,OAAO,EAAEiC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CAFJ,CADJ;AAQH","sourcesContent":["import React, {useRef, useEffect, useState} from 'react';\r\nimport emailjs from 'emailjs-com';\r\nimport {useHistory} from 'react-router-dom';\r\nimport firebase from 'firebase';\r\n\r\n\r\nexport default function Paypal( {formData, priceTotal} ) {\r\n    \r\n    const paypal = useRef()\r\n    const [currentUser, setCurrentUser] = useState('no email yet');\r\n    const [sendingCart, setSendingCart] = useState('');\r\n\r\n    //going to success page after payment\r\n    let history = useHistory();\r\n\r\n    function handleClick() {\r\n      history.push(\"/success\");\r\n    }\r\n    \r\n    const sendConfirmationEmail = () => {\r\n\r\n        // if (cart.length > 0){\r\n\r\n\r\n\r\n        //     var templateParams = {\r\n        //         name: 'James',\r\n        //         email: currentUser.email,\r\n        //         cart: sendingCart,\r\n        //         total_price: priceTotal,\r\n        //         shipping: '217 Pleasant St.',\r\n        //     };\r\n    \r\n        //     emailjs.send('service_12x6qif', 'template_5h83g8t', templateParams , 'user_CqDTkQBUriwIbjinTaVaw')\r\n        //         .then(function(response) {\r\n        //            console.log('SUCCESS!', response.status, response.text);\r\n        //         }, function(error) {\r\n        //            console.log('FAILED...', error);\r\n        //         });\r\n\r\n        // } else {\r\n        //     console.log('no items in the cart')\r\n        // }\r\n\r\n    }\r\n\r\n\r\n    useEffect(()=> {\r\n\r\n        //checking if there's a user logged in\r\n        // app.auth().onAuthStateChanged((user) => {\r\n        //     setCurrentUser(user);\r\n        // })\r\n        // let newArray = []\r\n        // cart.forEach(item => {\r\n        //     newArray.push(` ${item.title} ${item.subtitle} ${item.test * item.qty} tests for $${item.price * item.qty}.00    |`)\r\n        // });\r\n        // setSendingCart(newArray.join(' '))\r\n\r\n        let total = priceTotal\r\n\r\n\r\n\r\n        //sending payment through paypal\r\n        window.paypal.Buttons({\r\n            createOrder: (data, actions, err) => {\r\n                return actions.order.create({\r\n                    intent: 'CAPTURE',\r\n                    purchase_units: [\r\n                        {\r\n                            description: \"Cool and accurate kit\",\r\n                            amount: {\r\n                                currency_code: 'USD',\r\n                                value: 1\r\n                            }  \r\n                        }\r\n                    ]\r\n                })\r\n            },\r\n            onApprove: async (data, actions) => {\r\n                const order = await actions.order.capture()\r\n                console.log(order)\r\n                sendConfirmationEmail();\r\n            },\r\n            onError: (err) => {\r\n                console.log(err)\r\n            }\r\n        }).render(paypal.current)\r\n    },[])\r\n\r\n\r\n\r\n\r\n  // firebase requirements\r\n  const database = firebase.database();\r\n  const ref = database.ref('bookings');\r\n\r\n      //submitting form to firebase database\r\n  const submitHandler = () => {\r\n    console.log('booking sent');\r\n    console.log(formData);\r\n    // ref.push(formData);\r\n  }\r\n\r\n    \r\n    return (\r\n        <div>\r\n            <div ref={paypal} ></div>\r\n            <div>\r\n                <button onClick={submitHandler} >pretend pay</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}